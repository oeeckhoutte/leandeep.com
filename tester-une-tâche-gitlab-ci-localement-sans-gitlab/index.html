<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="Olivier Eeckhoutte">
<meta name="description" content="Dans cet article nous allons voir comment tester une pipeline Gitlab CI en local. Il n&#39;est pas nécessaire d&#39;installer un Gitlab en local; ce qui peut être ennuyeux avec la gestion des certificats SSL. Pouvoir tester son fichier .gitlab-ci.yml en local est très utile pour 2 raisons. D&#39;un côté c&#39;est plus rapide car il ne faut pas pousser son code sur un Gitlab distant et attendre qu&#39;un runner soit disponible. D&#39;un autre côté on ne pollue pas le repository Git distant avec d&#39;innombrables commits de tests (on peut réécrire l&#39;historique je sais bien) ou avec des notifications aux collègues." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<script>
    
    
    if (!(window.location.host.startsWith("127.0.0.1")) && !(window.location.host.startsWith("localhost"))) {
        if (window.location.protocol != "https:") {
            console.log("Redirecting to https...")
            window.location.protocol = "https";
        }
    }
</script>
<link rel="canonical" href="https://leandeep.com/tester-une-t%C3%A2che-gitlab-ci-localement-sans-gitlab/" />


    <title>
        
            Tester une tâche Gitlab CI localement sans Gitlab :: Bienvenue sur le site de Lean Deep 
        
    </title>



<link href="//cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://leandeep.com/main.min.76b2f8e1bc1c6e8b40b499ecd059c58ca8f1651ea64d3dbd8aecaf5ea0278c20.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://leandeep.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://leandeep.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://leandeep.com/favicon-16x16.png">
    <link rel="manifest" href="https://leandeep.com/site.webmanifest">
    <link rel="mask-icon" href="https://leandeep.com/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://leandeep.com/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">

<meta itemprop="name" content="Tester une tâche Gitlab CI localement sans Gitlab">
<meta itemprop="description" content="Dans cet article nous allons voir comment tester une pipeline Gitlab CI en local. Il n&#39;est pas nécessaire d&#39;installer un Gitlab en local; ce qui peut être ennuyeux avec la gestion des certificats SSL. Pouvoir tester son fichier .gitlab-ci.yml en local est très utile pour 2 raisons. D&#39;un côté c&#39;est plus rapide car il ne faut pas pousser son code sur un Gitlab distant et attendre qu&#39;un runner soit disponible. D&#39;un autre côté on ne pollue pas le repository Git distant avec d&#39;innombrables commits de tests (on peut réécrire l&#39;historique je sais bien) ou avec des notifications aux collègues.">
<meta itemprop="datePublished" content="2018-11-18T21:18:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-11-18T21:18:00&#43;00:00" />
<meta itemprop="wordCount" content="220">
<meta itemprop="image" content="https://leandeep.com"/>



<meta itemprop="keywords" content="Gitlab," /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://leandeep.com"/>

<meta name="twitter:title" content="Tester une tâche Gitlab CI localement sans Gitlab"/>
<meta name="twitter:description" content="Dans cet article nous allons voir comment tester une pipeline Gitlab CI en local. Il n&#39;est pas nécessaire d&#39;installer un Gitlab en local; ce qui peut être ennuyeux avec la gestion des certificats SSL. Pouvoir tester son fichier .gitlab-ci.yml en local est très utile pour 2 raisons. D&#39;un côté c&#39;est plus rapide car il ne faut pas pousser son code sur un Gitlab distant et attendre qu&#39;un runner soit disponible. D&#39;un autre côté on ne pollue pas le repository Git distant avec d&#39;innombrables commits de tests (on peut réécrire l&#39;historique je sais bien) ou avec des notifications aux collègues."/>





    <meta property="article:published_time" content="2018-11-18 21:18:00 &#43;0000 &#43;0000" />








    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://leandeep.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/leandeep</span>
            <span class="logo__cursor" style=""></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://leandeep.com/events/">Featured Articles</a></li><li><a href="https://leandeep.com/posts/">All Articles</a></li><li><a href="https://leandeep.com/cv/">CV</a></li><li><a href="https://leandeep.com/twitter/">Twitter</a></li><li><a href="https://leandeep.com/tips/">Tips</a></li><li><a href="https://leandeep.com/notebooks/">Notebooks</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>2 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://leandeep.com/tester-une-t%C3%A2che-gitlab-ci-localement-sans-gitlab/">Tester une tâche Gitlab CI localement sans Gitlab</a>
            </h1>

            

            <div class="post-content">
                <p>Dans cet article nous allons voir comment tester une pipeline Gitlab CI en local. Il n'est pas nécessaire d'installer un Gitlab en local; ce qui peut être ennuyeux avec la gestion des certificats SSL. Pouvoir tester son fichier <code>.gitlab-ci.yml</code> en local est très utile pour 2 raisons. D'un côté c'est plus rapide car il ne faut pas pousser son code sur un Gitlab distant et attendre qu'un runner soit disponible. D'un autre côté on ne pollue pas le repository Git distant avec d'innombrables commits de tests (on peut réécrire l'historique je sais bien) ou avec des notifications aux collègues.</p>
<p>Prenons par exemple le fichier <code>.gitlab-ci.yml</code> suivant:</p>
<pre><code>build:
    image: nodejs:8
    stage: build
    before_script:
        - npm i
    script:
        - npm run build

</code></pre><p>Avec la commande suivante on peut directement tester sa tâche build en local:</p>
<pre><code>gitlab-runner exec docker build
</code></pre><p>Lorsqu'on utilise Gitlab CI on faut parfois faire appel à du cache entre les stages. C'est possible d'en avoir avec la commande suivante:</p>
<pre><code>gitlab-runner exec docker --docker-volumes `pwd`/cache:/cache build
</code></pre><p>On peut aussi se faire un petit <code>Makefile</code> pour se simplifier la vie:</p>
<pre><code>.PHONY: clean

.DEFAULT: cache
    gitlab-runner exec docker --docker-volumes `pwd`/cache:/cache $@

cache:
    mkdir $@

clean:
    rm -rf cache
</code></pre><p>Enfin, si vous voulez passer des variables d'environnement dans un stage de votre pipeline cela se fait ainsi:</p>
<pre><code>gitlab-runner exec docker --env YOUR_ENV_VAR=&quot;&quot; build
</code></pre>
            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://leandeep.com/tags/gitlab">Gitlab</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>220 Mots</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>18 Nov. 2018</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://leandeep.com/convertir-une-video-.webm-en-.mp4/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Convertir une video .webm en .mp4</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://leandeep.com/partager-des-cl%C3%A9s-priv%C3%A9es-entre-les-diff%C3%A9rents-membres-dune-%C3%A9quipe/">
                                <span class="button__text">Partager des clés privées entre les différents membres d&#39;une équipe</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>Réalisé par <a href="https://www.linkedin.com/in/oliviereeckhoutte/">Olivier Eeckhoutte</a>, gérant de Lean Deep</span>
            <span>Siret: 83825337500011</span>
            
            <span> <a href="https://leandeep.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://leandeep.com/bundle.min.016c8e5770e17fd1303ca7a9b80f022e42cc24b9e07f33b1c0de276576fccde3dfc4c7698f10f2d1443d2465f6d58d4470aff0782daef69e7172da8a75ff41b1.js" integrity="sha512-AWyOV3Dhf9EwPKepuA8CLkLMJLngfzOxwN4nZXb8zePfxMdpjxDy0UQ9JGX21Y1EcK/weC2u9p5xctqKdf9BsQ=="></script>



    </body>
</html>
