<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
  content="Olivier Eeckhoutte">
<meta name="description"
  content="Indispensable à savoir Index
L’index est une zone qui permet de préparer un commit.
 HEAD
HEAD est la référence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.
 Rebase vs Merge Préférer le rebase pour garder un historique propre
 Rebase Eviter git pull pour éviter que Git ne considère notre branche locale et remote comme 2 branches différentes alors que ce sont les mêmes." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<script>
  
  
  if (!(window.location.host.startsWith("127.0.0.1")) && !(window.location.host.startsWith("localhost"))) {
    if (window.location.protocol != "https:") {
      console.log("Redirecting to https...")
      window.location.protocol = "https";
    }
  }
</script>


<link rel="canonical" href="https://leandeep.com/config-commandes-et-tips-utiles-git/" />




<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">



<script src="https://fb.me/react-15.1.0.min.js"></script>
<script src="https://fb.me/react-dom-15.1.0.min.js"></script>
<style>
  .nav-search {
    display: none;
    -webkit-flex-grow: 1;
    -ms-flex-positive: 1;
    position: relative;
    width: 90%;
    height: 47px;
    margin-top: 20px;
    background-color: white;
    z-index: 1000;
  }

  .nav-search.active {
    box-shadow: 0 4px 4px rgba(79, 79, 79, 0.21);
  }

  .nav-search.active .search-dropdown {
    display: block;
  }

  .nav-search.active .search-input {
    -webkit-animation: expand-search-box-animation 0.5s forwards;
    animation: expand-search-box-animation 0.5s forwards;
  }

  .nav-search.active .search-input input {
    border-width: 2px;
  }

  .nav-search.active .search-input .close-search {
    display: inline-block;
  }

  .nav-search.active .search-input .search-dropdown {
    display: block;
  }

  .nav-search .search-input {
    transition: left 0.2s ease-in-out;
    transition: width 0s ease-in-out;
  }

  .nav-search .search-input .search-icon {
    position: absolute;
    left: 15px;
    top: 13px;
    z-index: 999;
    color: black;
  }

  .nav-search .search-input input {
    font: 16px/1.875 "Avenir Next W01", "Avenir Next", "Helvetica Neue", Helvetica, sans-serif;
    height: 50px;
    border: 1px solid #1b98f4;
    border-radius: 4px;
    min-width: 200px;
    width: 100%;
    padding-left: 50px;
    background-color: white;
  }

  .nav-search .search-input input:focus {
    outline: none;
  }

  .nav-search .search-input i.close-search {
    color: #1b98f4;
    display: none;
    position: absolute;
    right: 15px;
    top: 13px;
    cursor: pointer;
  }

  .search-dropdown {
    box-sizing: border-box;
    color: #B3B3B3;
    font: 14px/1.875 "Avenir Next W01", "Avenir Next", "Helvetica Neue", Helvetica, sans-serif;
    opacity: 1.00;
    padding: 20px;
    width: 100%;
    -webkit-animation: expand-search-dropdown-animation 0.5s forwards;
    animation: expand-search-dropdown-animation 0.5s forwards;
    overflow-y: scroll;
    max-height: 400px;
    border-radius: 0 0 4px 4px;
    background-color: #FCFCFC;
    border: 1px solid #E0E0E0;
    box-shadow: 1px 3px 4px rgba(0, 0, 0, 0.09);
    display: none;
    background-color: white;
  }

  .search-dropdown .small {
    -webkit-flex-basis: 35%;
    -ms-flex-preferred-size: 35%;
    flex-basis: 35%;
  }

  .search-dropdown .search-section .hits-blank {
    color: #666;
    text-align: center;
    padding-top: 20px;
  }

  .search-dropdown a {
    text-decoration: none;
    color: inherit;
    z-index: 2000;
  }

  .hit {
    border-bottom: 1px solid #E6E6E6;
    margin-bottom: 20px;
  }

  .hit .hit-title {
    color: #1b98f4;
    font-family: 'bt_mono', monospace;
    font-weight: 500;
    margin-bottom: 0;
    margin-top: 0;
    display: inline-block;
    font-size: 14px;
  }

  .hit .hit-description {
    text-decoration: none;
    color: black;
    font-size: 14px;
    display: block;
    margin-top: 3px;
  }

  .hit .hit-anchor {
    font-size: 13px;
    color: #666;
  }

  .hit .algolia-docsearch-suggestion--highlight {
    background-color: #FFE9A4;
  }

  .hit:last-child {
     
  }

  .ais-hits--item:last-child .hit {
    border: 0;
  }
</style>

<style>
  #app {
    display: none;
     
    border-radius: 10px;
    box-shadow: 2px 5px 12px -1px rgba(0, 0, 0, 0.56);
    padding: 20px;
    background-color: white;
    max-width: 500px;
    margin: 15px auto;
    text-align: center;
    min-height: 500px;
  }

  #app input {
    margin: 0 auto;
    float: none;
    width: 100%;
    max-width: 300px;
    padding: 5px 10px;
    border: 2px solid black;
  }

  #app ul {
    margin: 0;
    padding: 0;
  }

  #app li {
    text-align: left;
    padding: 5px 10px;
    width: 100%;
    max-width: 280px;
    margin: 1px auto;
    background-color: white;
    border: 1px solid black;
    list-style: none;
  }
</style>




<title>
  
  Config, Commandes et tips utiles Git :: Lean Deep Tech blog 
  
</title>



<link href="//cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
  type="text/css">



<link rel="stylesheet" href="https://leandeep.com/main.min.97cff9b820063eed1f719963e199e8907ee6d7c657c2f77cb00a044a7f22ea5a.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://leandeep.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://leandeep.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://leandeep.com/favicon-16x16.png">
    <link rel="manifest" href="https://leandeep.com/site.webmanifest">
    <link rel="mask-icon" href="https://leandeep.com/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://leandeep.com/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">

<meta itemprop="name" content="Config, Commandes et tips utiles Git">
<meta itemprop="description" content="Indispensable à savoir Index
L’index est une zone qui permet de préparer un commit.
 HEAD
HEAD est la référence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.
 Rebase vs Merge Préférer le rebase pour garder un historique propre
 Rebase Eviter git pull pour éviter que Git ne considère notre branche locale et remote comme 2 branches différentes alors que ce sont les mêmes."><meta itemprop="datePublished" content="2015-09-19T18:25:00&#43;00:00" />
<meta itemprop="dateModified" content="2015-09-19T18:25:00&#43;00:00" />
<meta itemprop="wordCount" content="2174"><meta itemprop="image" content="https://leandeep.com"/>
<meta itemprop="keywords" content="Development,Git," /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://leandeep.com"/>

<meta name="twitter:title" content="Config, Commandes et tips utiles Git"/>
<meta name="twitter:description" content="Indispensable à savoir Index
L’index est une zone qui permet de préparer un commit.
 HEAD
HEAD est la référence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.
 Rebase vs Merge Préférer le rebase pour garder un historique propre
 Rebase Eviter git pull pour éviter que Git ne considère notre branche locale et remote comme 2 branches différentes alors que ce sont les mêmes."/>





<meta property="article:published_time" content="2015-09-19 18:25:00 &#43;0000 &#43;0000" />







    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://leandeep.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/leandeep</span>
            <span class="logo__cursor" style=""></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://leandeep.com/events/">Featured Articles</a></li><li><a href="https://leandeep.com/posts/">All Articles</a></li><li><a href="https://leandeep.com/about/">About</a></li><li><a href="https://leandeep.com/finance/">Finance</a></li><li><a href="https://leandeep.com/notebooks/">ML Notebooks</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>

            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>11 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://leandeep.com/config-commandes-et-tips-utiles-git/">Config, Commandes et tips utiles Git</a>
            </h1>

            

            <div class="post-content">
                <h2 id="indispensable-à-savoir">Indispensable à savoir</h2>
<p><strong>Index</strong></p>
<p>L’index est une zone qui permet de préparer un commit.</p>
<br/>
<p><strong>HEAD</strong></p>
<p>HEAD est la référence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.</p>
<br/>
<h2 id="rebase-vs-merge">Rebase vs Merge</h2>
<p>Préférer le rebase pour garder un historique propre</p>
<br/>
<h2 id="rebase">Rebase</h2>
<p>Eviter <code>git pull</code> pour éviter que Git ne considère notre branche locale et remote comme 2 branches différentes alors que ce sont les mêmes.</p>
<p>Faire un rebase:</p>
<pre><code>git pull --rebase 
ou 
git rebase origin/master
</code></pre><p>Les commits qui n’existaient que sur la branche master sont supprimés et réappliqués/ rejoués à la suite des commits de la branche origin/master.</p>
<p>En rebasant vos branches avant de les fusionner, vous obtiendrez un historique tout plat et bien plus agréable à parcourir.</p>
<br/>
<p><strong>Exemple 1</strong></p>
<pre><code>          F---G ← bug2
         /
A---B---E---H---I ← master
     \
      C---D ← bug1
</code></pre><p>En utilisant un rebase avant chaque fusion, on obtient l&rsquo;historique suivant :</p>
<pre><code>A---B---E---H---I---C---D---F---G ← master
</code></pre><p>Les commandes pour parvenir à ce résultat sont les suivantes, explications juste après.</p>
<pre><code>git rebase master bug1
git checkout master
git merge bug1
git branch -d bug1
git rebase master bug2
git checkout master
git merge bug2
git branch -d bug2
</code></pre><p>Explications des commandes.</p>
<ul>
<li>Transplante bug1 sur l&rsquo;actuelle branche master. <strong>Si on est déjà en train de bosser sur bug1 on peut se contenter de taper git rebase master</strong></li>
<li>Switche sur master</li>
<li>Fusionne bug1 dans master</li>
<li>Supprime la branche bug1 devenue inutile</li>
<li>Transplante bug2 sur la branche master</li>
<li>Switche sur master</li>
<li>Fusionne bug2 dans master</li>
<li>Supprime bug2 devenue inutile.</li>
</ul>
<br/>
<p><strong>Exemple 2</strong></p>
<blockquote>
<p>Autre manière de faire, peut être plus simple&hellip;</p>
</blockquote>
<p>En supposant que l&rsquo;on veuille garder la feature branche synchronisée avec la branche develop, voici les commandes à suivre:</p>
<pre><code>git fetch # depuis la feature branche (vérifier que la feature branche sur laquelle vous travaillez est à jour)

git rebase origin/develop

# S'il y a des conflits, il faut les résoudre un par un.

Utiliser git rebase --continue une fois que tous les conflits sont traités

git push origin feature_branch --force
</code></pre><br/>
<p><strong>Exemple 3 (ultra simple que je recommande)</strong></p>
<pre><code>git checkout votre_feature_branch
git fetch
git rebase origin/master
</code></pre><p>Et c&rsquo;est tout!</p>
<br/>
<h2 id="merge-quand-même">Merge (quand même)</h2>
<pre><code>git checkout master
git pull
git checkout your_feature_en_attente
git merge master
</code></pre><br/>
<h2 id="stash">Stash</h2>
<p>Cette commande permet de mettre de côté des modifications de la copie de travail et de l’index.</p>
<br/>
<p><strong>Afficher tous les stash</strong></p>
<pre><code>git stash list
</code></pre><br/>
<p><strong>Appliquer un stash</strong></p>
<pre><code># Exemple:
git stash apply stash@{0}
</code></pre><br/>
<p><strong>Créer un nouveau stash (stasher tous les fichiers)</strong></p>
<pre><code>git stash save &quot;&lt;nom du stash&gt;&quot;
</code></pre><br/>
<p><strong>Créer seulement certains fichiers</strong></p>
<p>Add to index changes we don&rsquo;t want to stash and then stash with &ndash;keep-index option.</p>
<pre><code>git add app/controllers/cart_controller.php
git stash --keep-index
git reset
</code></pre><br/>
<p><strong>Appliquer un stash</strong></p>
<pre><code>git stash branch myfeature
</code></pre><br/>
<p><strong>Appliquer le dernier stash (LIFO)</strong></p>
<pre><code>git stash pop
</code></pre><br/>
<p><strong>Voir le contenu du dernier stash</strong></p>
<pre><code>git stash show -p
</code></pre><br/>
<p><strong>Voir le contenu d&rsquo;un stash spécifique</strong></p>
<pre><code>git stash show -p stash@{42}
</code></pre><br/>
<h2 id="cherry-picking">Cherry-picking</h2>
<p>Cherry-pick permet de sélectionner un commit quelconque et de l’appliquer sur la branche actuelle.</p>
<pre><code>git checkout my-feature
git cherry-pick e32c529d
</code></pre><br/>
<h2 id="résoudre-un-conflit">Résoudre un conflit</h2>
<p><strong>Pendant un merge</strong></p>
<p>Après un <code>git merge</code> ou <code>git pull</code>, on commence par exécuter la commande:</p>
<pre><code>git status # ou gss # ou git st # git stp (voir mes alias)
# On branch master
# Changes to be committed:
#
#       modified:   mon_fichier1
#
# Unmerged paths:
#   (use &quot;git add/rm &lt; file &gt;...&quot; as appropriate to mark resolution)
#
#       both modified:      mon_fichier2
#
</code></pre><p>Puis on corrige le problème de merge grâce à la commande <code>git mergetool</code> qui ouvrira l&rsquo;outil de merge configuré sur votre poste.
Autre possibilité, faire la correction manuellement, faire un <code>git add</code> ou <code>git stage</code> sur le fichier corrigé et enfin un <code>git commit</code>.</p>
<blockquote>
<p>En cas de problème, il est possible d&rsquo;exécuter un <code>git reset --hard HEAD</code> pour revenir en arrière sur le merge</p>
</blockquote>
<blockquote>
<p>Pour configurer git mergetool, il est possible d&rsquo;utiliser la commande suivante: <code>git config --global merge.tool bc3</code> après avoir téléchargé et installé l&rsquo;extension <a href="https://marketplace.visualstudio.com/items?itemName=hung-vi.terminal-git-mergetool">vscode-ext-git-mergetool</a> pour OSX .</p>
</blockquote>
<br/>
<p><strong>Pendant un rebase</strong></p>
<pre><code>git checkout master # ou git co master
git rebase origin/master # ou git pull --rebase

git status
# Unmerged paths:
#   (use &quot;git add/rm &lt; file &gt;...&quot; as appropriate to mark resolution)
#
#       both modified:      mon_fichier
#

git mergetool

# On corrige

git rebase --continue
</code></pre><blockquote>
<p>Pour revenir en arrière (état du dépot) sur un rebase qui se passe mal: <code>git rebase --abort</code></p>
</blockquote>
<p>Un schéma vaut mieux qu&rsquo;un long discours. Voici ce que fait un rebase:</p>
<p><img src="https://leandeep.com/images/rebase.png" alt="image"></p>
<br/>
<p><strong>Gérer un conflit sur un binaire</strong></p>
<pre><code>git checkout --ours -- path_binary_file
git checkout --theirs -- path_binary_file
</code></pre><br/>
<h2 id="réécrire-lhistorique">Réécrire l&rsquo;historique</h2>
<pre><code>git rebase --interactive HEAD~3
# ou 
# git rebase -i HEAD~3
# ou
# git rebase -i &lt;sha-de-votre-commit&gt; (via git log)
</code></pre><p>Plusieurs options s&rsquo;offrent à nous pour les 3 commits:</p>
<ul>
<li>Supprimer la ligne pour supprimer le commit de l’historique</li>
<li>Changer l’ordre des lignes pour changer l’ordre d’application des commits</li>
<li>Remplacer &ldquo;pick&rdquo; par &ldquo;edit&rdquo; pour pouvoir modifier le commit</li>
<li>Remplacer &ldquo;pick&rdquo; par &ldquo;squash&rdquo; pour merger le commit avec le précédent pour n’en créer qu’un seul</li>
<li>Remplacer &ldquo;pick&rdquo; par &ldquo;reword&rdquo; pour juste changer le message de commit</li>
</ul>
<p>Pour poursuivre la réécriture de l’historique, terminer avec les commandes suivantes:</p>
<pre><code>git stage
git rebase --continue
</code></pre><br/>
<h2 id="config-en-plus-de-oh-my-zsh">Config (en plus de oh-my-zsh)</h2>
<p>A ajouter au fichier ~/.gitconfig:</p>
<pre><code>[alias]
        st = status
        stp = status --porcelain
        ci = commit
        br = branch
        co = checkout
        rz = reset --hard HEAD
        pullr = pull --rebase
        unstage = reset HEAD
        lol = log --graph --decorate --pretty=oneline --abbrev-commit
        lolar = log --graph --pretty='format:%C(auto)%h %d %s %C(green)%an%C(bold blue) %ad' --all --date=relative
        lola = log --graph --decorate --pretty=oneline --abbrev-commit --all
        lpush = &quot;!git --no-pager log origin/$(git currentbranch)..HEAD --oneline&quot;
        lpull = &quot;!git --no-pager log HEAD..origin/$(git currentbranch) --oneline&quot;
        whatsnew = &quot;!git diff origin/$(git currentbranch)...HEAD&quot;
        whatscoming = &quot;!git diff HEAD...origin/$(git currentbranch)&quot;
        currentbranch = &quot;!git branch | grep \&quot;^\\*\&quot; | cut -d \&quot; \&quot; -f 2&quot;
...
[color]
        branch = auto
        diff = auto
        status = auto
        interactive = auto
</code></pre><br/>
<h2 id="télécharger-en-local-les-pull-requests">Télécharger en local les Pull Requests</h2>
<p><strong>Projet par projet</strong></p>
<p>Dans le fichier .git/config, localiser le code qui ressemble à ceci:</p>
<pre><code>[remote &quot;origin&quot;]
	fetch = +refs/heads/*:refs/remotes/origin/*
	url = git@github.com:joyent/node.git
</code></pre><p>Maintenant ajouter la ligne suivante:</p>
<pre><code>(pour Gitlab) fetch = +refs/merge-requests/*/head:refs/remotes/origin/merge-requests/*

# fetch = +refs/pull/*/head:refs/remotes/origin/pr/*
</code></pre><p>La section dans le fichier devrait resssemble à cela:</p>
<pre><code>[remote &quot;origin&quot;]
	fetch = +refs/heads/*:refs/remotes/origin/*
	url = git@github.com:joyent/node.git
	fetch = +refs/merge-requests/*/head:refs/remotes/origin/merge-requests/*
</code></pre><p>Maitenant vous pouvez récupérer toutes les PR en cours:</p>
<pre><code>git fetch origin
From github.com:joyent/node
 * [new ref]         refs/pull/1000/head -&gt; origin/pr/1000
 * [new ref]         refs/pull/1002/head -&gt; origin/pr/1002
 * [new ref]         refs/pull/1004/head -&gt; origin/pr/1004
 * [new ref]         refs/pull/1009/head -&gt; origin/pr/1009
...
</code></pre><p>Vous pouvez faire un checkout sur une pull request en particulier:</p>
<pre><code>git checkout pr/999
Branch pr/999 set up to track remote branch pr/999 from origin.
Switched to a new branch 'pr/999'
</code></pre><br/>
<p><strong>Ajouter automatiquement cette commande à tous les repos</strong></p>
<pre><code>git config --global --add remote.origin.fetch &quot;+refs/pull/*/head:refs/remotes/origin/pr/*&quot;
</code></pre><br/>
<h2 id="différences-entre-branches">Différences entre branches</h2>
<p><strong>Différences entre branche actuelle et master:</strong></p>
<pre><code>git diff master
</code></pre><br/>
<p><strong>Différences entre 2 branches (par exemple master et staging):</strong></p>
<pre><code>git diff master..staging
</code></pre><br/>
<p><strong>Seulement montrer les fichiers différents entre 2 branches (sans les changements):</strong></p>
<pre><code>git diff --name-status master..staging
</code></pre><br/>
<p><strong>Différence entre un fichier local (déjà en stage) et le dernier commit (ou l&rsquo;avant dernier):</strong></p>
<pre><code>git diff &lt;commit&gt; &lt;path&gt;
# Dernier commit:
git diff HEAD^ myfile
# Avant dernier commit:
git diff HEAD^^ myfile
# Equivalent à:
git diff HEAD~2 myfile

Example:
git diff HEAD~1 HEAD -- mon_fichier.js
git diff HEAD~2 HEAD -- mon_fichier.js
</code></pre><br/>
<h2 id="commandes-en-vrac">Commandes en vrac</h2>
<p><strong>Annuler la commande <code>git commit</code> (et donc conserver/ récupérer tous les changements qui étaient prêts à être pushés:</strong></p>
<pre><code>git reset --soft HEAD^
</code></pre><br/>
<p><strong>Modifier le dernier commit:</strong></p>
<pre><code>git commit --amend
</code></pre><br/>
<p><strong>Renommer une branche locale:</strong></p>
<pre><code>git checkout ancien_nom
git branch -m nouveau_nom
git push origin nouveau_nom
</code></pre><br/>
<p><strong>Effacer une branche locale:</strong></p>
<pre><code>git branch -d new-branch
</code></pre><br/>
<p><strong>Effacer une branche remote:</strong></p>
<pre><code>git push origin --delete new-branch
</code></pre><br/>
<p><strong>Retourner sur la dernière branche:</strong></p>
<pre><code>git checkout -
</code></pre><br/>
<p><strong>Contrôler le comportement de git push par default pour éviter de devoir specifier la branch (sur laquelle on est) avant de pusher:</strong></p>
<pre><code>git config --global push.default current
</code></pre><br/>
<p><strong>Annuler les changements en local d&rsquo;un fichier</strong></p>
<pre><code>git checkout filename
</code></pre><br/>
<p><strong>Pusher un seul commit</strong></p>
<pre><code>git push &lt;remote_name&gt; &lt;commit SHA&gt;:&lt;remote_branch_name&gt;
</code></pre><p>La branche &lt;remote_branch_name&gt; doit exister sur remote. (Si ce n&rsquo;est pas le cas, il est possible d&rsquo;utiliser <code>git push &lt;remote_name&gt; &lt;commit SHA&gt;:refs/heads/&lt;remote_branch_name&gt;</code> pour la créer automatiquement.)</p>
<blockquote>
<p>Note:
<code>git push --set-upstream origin dev</code> ou <code>git push -u origin dev</code>
Cette commande envoie la branche « dev » vers le dépôt « origin » (i.e. celui dont on a fait un clone au départ), et l&rsquo;option &ndash;set-upstream permet de dire à Git de se souvenir qu&rsquo;un « git push » de notre branche « dev » a été fait. Le prochain push pourra donc se faire simplement avec un simple <code>git push</code>.</p>
</blockquote>
<br/>
<p><strong>Annuler le dernier commit</strong></p>
<p>Les commandes à appliquer dépendent du dernier commit:</p>
<ul>
<li>
<p>Quand le dernier commit <strong>n&rsquo;est pas</strong> le commit initial, il suffit d&rsquo;exécuter la commance suivante: <code>git reset HEAD~</code></p>
</li>
<li>
<p>Quand le dernier commit <strong>est</strong> le commit initial, il faut exécuter les commandes suivantes: <code>git update-ref -d HEAD</code> puis <code>git rm --cached -r .</code></p>
</li>
</ul>
<br/>
<p><strong>Annuler le dernier commit et garder tous les changements staged</strong></p>
<pre><code>git reset --soft HEAD~
</code></pre><p><em>C&rsquo;est différent de <code>git reset HEAD~</code> qui ne garde pas staged les derniers changements.</em></p>
<br/>
<p><strong>Voir les derniers commits locaux pas encore pushé sur l&rsquo;origin:</strong></p>
<pre><code>git log --branches --not --remotes
</code></pre><br/>
<p><strong>Tagguer (le dernier commit d') une branche</strong></p>
<pre><code>git tag mon_tag
git push origin mon_tag

# (non recommandé) pousser tous les tags
git push --tags
</code></pre><br/>
<p><strong>Lister les fichiers modifiés dans une branche par rapport à master:</strong></p>
<pre><code>git diff --name-only ma_branche $(git merge-base ma_branche master)
</code></pre><br/>
<p><strong>Ajouter un tag sur un commit particulier</strong></p>
<pre><code>git tag -a v1.0 d613c59
git push origin v1.0
</code></pre><br/>
<p><strong>Effacer un tag local et remote</strong></p>
<pre><code>git tag -d v1.0
git push --delete origin v1.0
</code></pre><br/>
<p><strong>Lister les commits entre un tag et HEAD</strong></p>
<pre><code>git log --pretty=oneline HEAD...v1.0
</code></pre><blockquote>
<p>Alternative sans les commits de merge: <code>git log --pretty=oneline HEAD...v1.0 --no-merges</code></p>
</blockquote>
<blockquote>
<p>Alternative avec tous les détails: <code>git log HEAD...v1.0</code></p>
</blockquote>
<blockquote>
<p>Autre alternative: <code>git log --pretty=format:&quot;%h; author: %cn; date: %ci; subject:%s&quot; HEAD...v1.0</code></p>
</blockquote>
<br/>
<p><strong>Lister les commits de merge depuis le dernier tag et afficher uniquement le commit message</strong></p>
<pre><code>git log $(git describe --abbrev=0 --tags)..HEAD --merges --pretty=format:&quot;%b&quot;
</code></pre><br/>
<p><strong>Lister les commits de merge entre les 2 derniers tags et afficher uniquement le commit message</strong></p>
<pre><code>git log $(git describe --abbrev=0 --tags `git rev-list --tags --skip=1 --max-count=1`)..$(git describe --abbrev=0 --tags `git rev-list --tags --skip=0 --max-count=1`) --merges --pretty=format:&quot;%b&quot;
</code></pre><br/>
<p><strong>Récupérer le dernier tag</strong></p>
<pre><code>git describe --abbrev=0 --tags `git rev-list --tags --skip=0 --max-count=1`
</code></pre><br/>
<p><strong>Récupérer l&rsquo;avant dernier tag</strong></p>
<pre><code>git describe --abbrev=0 --tags `git rev-list --tags --skip=0 --max-count=1`
</code></pre><br/>
<p><strong>Voir les commits par contributeur depuis la dernière release/tag</strong></p>
<pre><code>git shortlog --merges $(git describe --abbrev=0 --tags)..HEAD
</code></pre><br/>
<p><strong>Get current branch</strong></p>
<pre><code>git rev-parse --abbrev-ref HEAD
</code></pre><br/>
<p><strong>Voir les changements/ commits sur un fichier</strong></p>
<pre><code>git log --follow -p -- full_path_mon_fichier
# --follow permet de suivre un fichier s'il a été renommé
</code></pre><blockquote>
<p>Alternative:
<code>find . -name &quot;*mon_fichier&quot; | xargs git log</code></p>
</blockquote>
<blockquote>
<p><strong>Super Alternative:</strong>  <br/>
<code>tig full_path_mon_fichier</code> ou <code>tig '*mon_fichier'</code> <br/>
Installation de tig via <code>brew install tig</code> ou <code>apt install tig</code> <br/>
<a href="http://jonas.nitro.dk/tig/manual.html">Tig Full documentation</a></p>
</blockquote>
<br/>
<h2 id="naviguer-dans-tout-son-historique-git">Naviguer dans tout son historique Git</h2>
<pre><code>$ git init
Initialized empty Git repository in .git/

$ echo &quot;testing reset&quot; &gt; file1
$ git add file1
$ git commit -m 'added file1'
Created initial commit 1a75c1d: added file1
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 file1

$ echo &quot;added new file&quot; &gt; file2
$ git add file2
$ git commit -m 'added file2'
Created commit f6e5064: added file2
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 file2

$ git reset --hard HEAD^
HEAD is now at 1a75c1d... added file1

$ cat file2
cat: file2: No such file or directory

$ git reflog
1a75c1d... HEAD@{0}: reset --hard HEAD^: updating HEAD
f6e5064... HEAD@{1}: commit: added file2

$ git reset --hard f6e5064
HEAD is now at f6e5064... added file2

$ cat file2
added new file
</code></pre><br/>
<h2 id="taille-en-local-du-repo">Taille en local du repo</h2>
<pre><code>$ git count-objects -v -H

count: 6
size: 24.00 KiB
in-pack: 0
packs: 0
size-pack: 0 bytes
prune-packable: 0
garbage: 0
size-garbage: 0 bytes
</code></pre><br/>
<h2 id="bisect">Bisect</h2>
<blockquote>
<p>Le bisect permet de réaliser une dichotimie sur un range de commit afin d&rsquo;identifier celui qui génère une régression.</p>
</blockquote>
<pre><code>$ git bisect start          # Start the binary search process
$ git bisect bad            # Identify the end of the range
$ git bisect good v4.2.0    # Identify the start of the range
</code></pre><p>Puis après un test sur votre app ou tests unitaires préciser soit <code>git bisect bad</code> ou <code>git bisect good</code></p>
<br/>
<h2 id="pull-git-submodules-après-avoir-cloné-un-projet-sur-github">Pull git submodules après avoir cloné un projet sur GitHub</h2>
<pre><code>git submodule update --init
</code></pre><br/>
<h2 id="gitignore-global">.gitignore global</h2>
<pre><code>touch ~/.gitignore_global
git config --global core.excludesfile ~/.gitignore_global
</code></pre><br/>
<h2 id="ajouter-un-tag-en-2s-shortcuts">Ajouter un tag en 2s (shortcuts)</h2>
<p>Ajouter ceci au fichier <code>~/.zshrc</code></p>
<pre><code>last_release ()
{
    git describe --abbrev=0 --tags `git rev-list --tags --skip=0 --max-count=1`
}

previous_release ()
{
    last_release
}

last_tag ()
{
    last_release
}

previous_tag ()
{
    last_release
}

function new_release {
    readonly releaseversion=${1:?&quot;The release version (i.e. new_release vX.X.X) must be specified.&quot;}
    current_branch=$(git rev-parse --abbrev-ref HEAD)
    if [ &quot;$current_branch&quot; != &quot;master&quot; ]; then
        echo &quot;Your are not on master branch. Please switch to it to create a new tag&quot;
    else
        git tag $releaseversion
        git push origin $releaseversion
    fi
}

</code></pre><br/>
<h2 id="workflow-pour-travailler-en-équipe">Workflow pour travailler en équipe</h2>
<p><strong>Gitflow:</strong>
<a href="http://danielkummer.github.io/git-flow-cheatsheet/">http://danielkummer.github.io/git-flow-cheatsheet/</a></p>
<br/>
<p><em>Edited 13 november 2016:</em></p>
<p><strong>Better method: Github flow:</strong></p>
<p><a href="https://blogs.technet.microsoft.com/devops/2016/06/21/a-git-workflow-for-continuous-delivery/">https://blogs.technet.microsoft.com/devops/2016/06/21/a-git-workflow-for-continuous-delivery/</a></p>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://leandeep.com/tags/development">Development</a></span><span class="tag"><a href="https://leandeep.com/tags/git">Git</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>2174 Mots</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>19 Sep. 2015</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://leandeep.com/comment-lire-une-matrice-de-confusion/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Comment lire une Matrice de confusion</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://leandeep.com/basics-python-commands-pour-matplotlib-numpy-pandas-et-debugging-misc/">
                                <span class="button__text">Basics Python commands pour Matplotlib, Numpy, Pandas et debugging misc</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>Réalisé par <a href="https://www.linkedin.com/in/oliviereeckhoutte/">Olivier Eeckhoutte</a>,
            Freelance & gérant de Lean Deep</span>
            <span>Siret: 83825337500011</span>
            
            <span> <a href="https://leandeep.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18"
                        height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss">
                        <path d="M4 11a9 9 0 0 1 9 9"></path>
                        <path d="M4 4a16 16 0 0 1 16 16"></path>
                        <circle cx="5" cy="19" r="1"></circle>
                    </svg></a></span>
        </div>
    </div>
</footer>


<script>

    class App extends React.Component {
        constructor(options) {
            console.log("data")
            console.log(options.data)
            super();
            this.state = {
                data: options.data,

                appName: 'Search Bar (Algolia replacement under dev with React)',
                list: undefined
            };

        }
        searchData(e) {
            var queryData = [];
            if (e.target.value != '') {
                this.state.data.forEach(function (person) {

                    if (person.toLowerCase().indexOf(e.target.value) != -1) {
                        if (queryData.length < 10) {
                            queryData.push(person);
                        }
                    }
                });
            }
            this.setState({ list: queryData });
        }
        render() {
            return  (
                React.createElement("div", null,  
                    React.createElement(Header, { name: this.state.appName }),  
                    React.createElement(SearchBar, { search: this.searchData.bind(this) }),
                    this.state.list ?  React.createElement(SearchResult, { data: this.state.list }) : null));


        }
    }


    class Header extends React.Component {
        render() {
            return  (
                React.createElement("div", null,  
                    React.createElement("h1", null, this.props.name)));


        }
    }


    class SearchBar extends React.Component {
        render() {
            return  (
                React.createElement("div", null,  
                    React.createElement("input", { onChange: this.props.search, placeholder: "Search Pokemon" })));


        }
    }


    class SearchResult extends React.Component {

        render() {
            return  (
                React.createElement("div", null,  
                    React.createElement("ul", null,
                        this.props.data.map(function (value) {
                            return  React.createElement(Item, { key: value, val: value });
                        }))));




        }
    }



    class Item extends React.Component {
        render() {
            return  (
                React.createElement("li", null,
                    this.props.val));


        }
    }


    navigator.serviceWorker.addEventListener('message', event => {
        console.log(event.data.msg, event.data.url, event.data.files);
        ReactDOM.render(  React.createElement(App, { "data": ["Bulbasaur", "Ivysaur", "Venusaur", "Charmander", "Charmeleon", "Charizard", "Squirtle", "Wartortle", "Blastoise", "Caterpie", "Metapod", "Butterfree", "Weedle", "Kakuna", "Beedrill", "Pidgey", "Pidgeotto", "Pidgeot", "Rattata", "Raticate", "Spearow", "Fearow", "Ekans", "Arbok", "Pikachu", "Raichu", "Sandshrew", "Sandslash", "Nidoran♀", "Nidorina", "Nidoqueen", "Nidoran♂", "Nidorino", "Nidoking", "Clefairy", "Clefable", "Vulpix", "Ninetales", "Jigglypuff", "Wigglytuff", "Zubat", "Golbat", "Oddish", "Gloom", "Vileplume", "Paras", "Parasect", "Venonat", "Venomoth", "Diglett", "Dugtrio", "Meowth", "Persian", "Psyduck", "Golduck", "Mankey", "Primeape", "Growlithe", "Arcanine", "Poliwag", "Poliwhirl", "Poliwrath", "Abra", "Kadabra", "Alakazam", "Machop", "Machoke", "Machamp", "Bellsprout", "Weepinbell", "Victreebel", "Tentacool", "Tentacruel", "Geodude", "Graveler", "Golem", "Ponyta", "Rapidash", "Slowpoke", "Slowbro", "Magnemite", "Magneton", "Farfetch'd", "Doduo", "Dodrio", "Seel", "Dewgong", "Grimer", "Muk", "Shellder", "Cloyster", "Gastly", "Haunter", "Gengar", "Onix", "Drowzee", "Hypno", "Krabby", "Kingler", "Voltorb", "Electrode", "Exeggcute", "Exeggutor", "Cubone", "Marowak", "Hitmonlee", "Hitmonchan", "Lickitung", "Koffing", "Weezing", "Rhyhorn", "Rhydon", "Chansey", "Tangela", "Kangaskhan", "Horsea", "Seadra", "Goldeen", "Seaking", "Staryu", "Starmie", "Mr. Mime", "Scyther", "Jynx", "Electabuzz", "Magmar", "Pinsir", "Tauros", "Magikarp", "Gyarados", "Lapras", "Ditto", "Eevee", "Vaporeon", "Jolteon", "Flareon", "Porygon", "Omanyte", "Omastar", "Kabuto", "Kabutops", "Aerodactyl", "Snorlax", "Articuno", "Zapdos", "Moltres", "Dratini", "Dragonair", "Dragonite", "Mewtwo", "Mew"] }), document.getElementById('app'));
    });
    navigator.serviceWorker.register('/service-worker.js', {
        scope: '.'
    }).then(function (registration) {
        console.log('The service worker has been registered ', registration);
    });
    

    
    setTimeout(function () {
        console.log("unregister sws")
        navigator.serviceWorker.getRegistrations().then(function (registrations) { for (let registration of registrations) { registration.unregister(); } });
    }, 10000);




</script>
            
        </div>

        




<script type="text/javascript" src="https://leandeep.com/bundle.min.4c4018abe212b17439e8419b064bd828529395ff8df5349aa438112be0cc961ff0ce0b0ed9b6928981ad1ac33392249f24521da889270304f8978b15643c182c.js" integrity="sha512-TEAYq&#43;ISsXQ56EGbBkvYKFKTlf&#43;N9TSapDgRK&#43;DMlh/wzgsO2baSiYGtGsMzkiSfJFIdqIknAwT4l4sVZDwYLA=="></script>







    </body>
</html>
