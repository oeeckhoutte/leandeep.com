<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
  content="Olivier Eeckhoutte">
<meta name="description"
  content="Indispensable √† savoir Index
L‚Äôindex est une zone qui permet de pr√©parer un commit.
HEAD
HEAD est la r√©f√©rence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.
Rebase vs Merge Pr√©f√©rer le rebase pour garder un historique propre
Rebase Eviter git pull pour √©viter que Git ne consid√®re notre branche locale et remote comme 2 branches diff√©rentes alors que ce sont les m√™mes." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="#252627" />
<script>
  
  
  if (!(window.location.host.startsWith("127.0.0.1")) && !(window.location.host.startsWith("localhost"))) {
    if (window.location.protocol != "https:") {
      console.log("Redirecting to https...")
      window.location.protocol = "https";
    }
  }
</script>


<link rel="canonical" href="https://leandeep.com/config-commandes-et-tips-utiles-git/" />




<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">



<script src="https://fb.me/react-15.1.0.min.js"></script>
<script src="https://fb.me/react-dom-15.1.0.min.js"></script>
<style>
  .nav-search {
    display: none;
    -webkit-flex-grow: 1;
    -ms-flex-positive: 1;
    position: relative;
    width: 90%;
    height: 47px;
    margin-top: 20px;
    background-color: white;
    z-index: 1000;
  }

  .nav-search.active {
    box-shadow: 0 4px 4px rgba(79, 79, 79, 0.21);
  }

  .nav-search.active .search-dropdown {
    display: block;
  }

  .nav-search.active .search-input {
    -webkit-animation: expand-search-box-animation 0.5s forwards;
    animation: expand-search-box-animation 0.5s forwards;
  }

  .nav-search.active .search-input input {
    border-width: 2px;
  }

  .nav-search.active .search-input .close-search {
    display: inline-block;
  }

  .nav-search.active .search-input .search-dropdown {
    display: block;
  }

  .nav-search .search-input {
    transition: left 0.2s ease-in-out;
    transition: width 0s ease-in-out;
  }

  .nav-search .search-input .search-icon {
    position: absolute;
    left: 15px;
    top: 13px;
    z-index: 999;
    color: black;
  }

  .nav-search .search-input input {
    font: 16px/1.875 "Avenir Next W01", "Avenir Next", "Helvetica Neue", Helvetica, sans-serif;
    height: 50px;
    border: 1px solid #1b98f4;
    border-radius: 4px;
    min-width: 200px;
    width: 100%;
    padding-left: 50px;
    background-color: white;
  }

  .nav-search .search-input input:focus {
    outline: none;
  }

  .nav-search .search-input i.close-search {
    color: #1b98f4;
    display: none;
    position: absolute;
    right: 15px;
    top: 13px;
    cursor: pointer;
  }

  .search-dropdown {
    box-sizing: border-box;
    color: #B3B3B3;
    font: 14px/1.875 "Avenir Next W01", "Avenir Next", "Helvetica Neue", Helvetica, sans-serif;
    opacity: 1.00;
    padding: 20px;
    width: 100%;
    -webkit-animation: expand-search-dropdown-animation 0.5s forwards;
    animation: expand-search-dropdown-animation 0.5s forwards;
    overflow-y: scroll;
    max-height: 400px;
    border-radius: 0 0 4px 4px;
    background-color: #FCFCFC;
    border: 1px solid #E0E0E0;
    box-shadow: 1px 3px 4px rgba(0, 0, 0, 0.09);
    display: none;
    background-color: white;
  }

  .search-dropdown .small {
    -webkit-flex-basis: 35%;
    -ms-flex-preferred-size: 35%;
    flex-basis: 35%;
  }

  .search-dropdown .search-section .hits-blank {
    color: #666;
    text-align: center;
    padding-top: 20px;
  }

  .search-dropdown a {
    text-decoration: none;
    color: inherit;
    z-index: 2000;
  }

  .hit {
    border-bottom: 1px solid #E6E6E6;
    margin-bottom: 20px;
  }

  .hit .hit-title {
    color: #1b98f4;
    font-family: 'bt_mono', monospace;
    font-weight: 500;
    margin-bottom: 0;
    margin-top: 0;
    display: inline-block;
    font-size: 14px;
  }

  .hit .hit-description {
    text-decoration: none;
    color: black;
    font-size: 14px;
    display: block;
    margin-top: 3px;
  }

  .hit .hit-anchor {
    font-size: 13px;
    color: #666;
  }

  .hit .algolia-docsearch-suggestion--highlight {
    background-color: #FFE9A4;
  }

  .hit:last-child {
     
  }

  .ais-hits--item:last-child .hit {
    border: 0;
  }
</style>

<style>
  #app {
    display: none;
     
    border-radius: 10px;
    box-shadow: 2px 5px 12px -1px rgba(0, 0, 0, 0.56);
    padding: 20px;
    background-color: white;
    max-width: 500px;
    margin: 15px auto;
    text-align: center;
    min-height: 500px;
  }

  #app input {
    margin: 0 auto;
    float: none;
    width: 100%;
    max-width: 300px;
    padding: 5px 10px;
    border: 2px solid black;
  }

  #app ul {
    margin: 0;
    padding: 0;
  }

  #app li {
    text-align: left;
    padding: 5px 10px;
    width: 100%;
    max-width: 280px;
    margin: 1px auto;
    background-color: white;
    border: 1px solid black;
    list-style: none;
  }
</style>




<title>
  
  Config, Commandes et tips utiles Git :: Lean Deep Tech blog 
  
</title>



<link href="//cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
  type="text/css">



<link rel="stylesheet" href="https://leandeep.com/main.min.180e3347563f97ba9ad6a5e3d97cbfda8cc0f63a6502fb6b298a8725c3a9ba75.css">




    <link rel="apple-touch-icon" sizes="180x180" href="https://leandeep.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://leandeep.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://leandeep.com/favicon-16x16.png">
    <link rel="manifest" href="https://leandeep.com/site.webmanifest">
    <link rel="mask-icon" href="https://leandeep.com/safari-pinned-tab.svg" color="#252627">
    <link rel="shortcut icon" href="https://leandeep.com/favicon.ico">
    <meta name="msapplication-TileColor" content="#252627">
    <meta name="theme-color" content="#252627">

<meta itemprop="name" content="Config, Commandes et tips utiles Git">
<meta itemprop="description" content="Indispensable √† savoir Index
L‚Äôindex est une zone qui permet de pr√©parer un commit.
HEAD
HEAD est la r√©f√©rence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.
Rebase vs Merge Pr√©f√©rer le rebase pour garder un historique propre
Rebase Eviter git pull pour √©viter que Git ne consid√®re notre branche locale et remote comme 2 branches diff√©rentes alors que ce sont les m√™mes."><meta itemprop="datePublished" content="2015-09-19T18:25:00+00:00" />
<meta itemprop="dateModified" content="2015-09-19T18:25:00+00:00" />
<meta itemprop="wordCount" content="2621"><meta itemprop="image" content="https://leandeep.com"/>
<meta itemprop="keywords" content="Development,Git," /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://leandeep.com"/>

<meta name="twitter:title" content="Config, Commandes et tips utiles Git"/>
<meta name="twitter:description" content="Indispensable √† savoir Index
L‚Äôindex est une zone qui permet de pr√©parer un commit.
HEAD
HEAD est la r√©f√©rence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.
Rebase vs Merge Pr√©f√©rer le rebase pour garder un historique propre
Rebase Eviter git pull pour √©viter que Git ne consid√®re notre branche locale et remote comme 2 branches diff√©rentes alors que ce sont les m√™mes."/>





<meta property="article:published_time" content="2015-09-19 18:25:00 &#43;0000 UTC" />







    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://leandeep.com/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/leandeep</span>
            <span class="logo__cursor" style=""></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://leandeep.com/events/">Featured Articles</a></li><li><a href="https://leandeep.com/posts/">All Articles</a></li><li><a href="https://leandeep.com/about/">About</a></li><li><a href="https://leandeep.com/finance/">Finance</a></li><li><a href="https://leandeep.com/notebooks/">ML Notebooks</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>

            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>13 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://leandeep.com/config-commandes-et-tips-utiles-git/">Config, Commandes et tips utiles Git</a>
            </h1>

            

            <div class="post-content">
                <h2 id="indispensable-√†-savoir">Indispensable √† savoir</h2>
<p><strong>Index</strong></p>
<p>L‚Äôindex est une zone qui permet de pr√©parer un commit.</p>
<br/>
<p><strong>HEAD</strong></p>
<p>HEAD est la r√©f√©rence sur le commit sur lequel on se trouve actuellement. On le change avec git checkout.</p>
<br/>
<h2 id="rebase-vs-merge">Rebase vs Merge</h2>
<p>Pr√©f√©rer le rebase pour garder un historique propre</p>
<br/>
<h2 id="rebase">Rebase</h2>
<p>Eviter <code>git pull</code> pour √©viter que Git ne consid√®re notre branche locale et remote comme 2 branches diff√©rentes alors que ce sont les m√™mes.</p>
<p>Faire un rebase:</p>
<pre tabindex="0"><code>git pull --rebase 
ou 
git rebase origin/master
</code></pre><p>Les commits qui n‚Äôexistaient que sur la branche master sont supprim√©s et r√©appliqu√©s/ rejou√©s √† la suite des commits de la branche origin/master.</p>
<p>En rebasant vos branches avant de les fusionner, vous obtiendrez un historique tout plat et bien plus agr√©able √† parcourir.</p>
<br/>
<p><strong>Exemple 1</strong></p>
<pre tabindex="0"><code>          F---G ‚Üê bug2
         /
A---B---E---H---I ‚Üê master
     \
      C---D ‚Üê bug1
</code></pre><p>En utilisant un rebase avant chaque fusion, on obtient l&rsquo;historique suivant :</p>
<pre tabindex="0"><code>A---B---E---H---I---C---D---F---G ‚Üê master
</code></pre><p>Les commandes pour parvenir √† ce r√©sultat sont les suivantes, explications juste apr√®s.</p>
<pre tabindex="0"><code>git rebase master bug1
git checkout master
git merge bug1
git branch -d bug1
git rebase master bug2
git checkout master
git merge bug2
git branch -d bug2
</code></pre><p>Explications des commandes.</p>
<ul>
<li>Transplante bug1 sur l&rsquo;actuelle branche master. <strong>Si on est d√©j√† en train de bosser sur bug1 on peut se contenter de taper git rebase master</strong></li>
<li>Switche sur master</li>
<li>Fusionne bug1 dans master</li>
<li>Supprime la branche bug1 devenue inutile</li>
<li>Transplante bug2 sur la branche master</li>
<li>Switche sur master</li>
<li>Fusionne bug2 dans master</li>
<li>Supprime bug2 devenue inutile.</li>
</ul>
<br/>
<p><strong>Exemple 2</strong></p>
<blockquote>
<p>Autre mani√®re de faire, peut √™tre plus simple&hellip;</p>
</blockquote>
<p>En supposant que l&rsquo;on veuille garder la feature branche synchronis√©e avec la branche develop, voici les commandes √† suivre:</p>
<pre tabindex="0"><code>git fetch # depuis la feature branche (v√©rifier que la feature branche sur laquelle vous travaillez est √† jour)

git rebase origin/develop

# S&#39;il y a des conflits, il faut les r√©soudre un par un.

Utiliser git rebase --continue une fois que tous les conflits sont trait√©s

git push origin feature_branch --force
</code></pre><br/>
<p><strong>Exemple 3 (ultra simple que je recommande)</strong></p>
<pre tabindex="0"><code>git checkout votre_feature_branch
git fetch
git rebase origin/master
</code></pre><p>Et c&rsquo;est tout!</p>
<br/>
<h2 id="merge-quand-m√™me">Merge (quand m√™me)</h2>
<pre tabindex="0"><code>git checkout master
git pull
git checkout your_feature_en_attente
git merge master
</code></pre><br/>
<h2 id="stash">Stash</h2>
<p>Cette commande permet de mettre de c√¥t√© des modifications de la copie de travail et de l‚Äôindex.</p>
<br/>
<p><strong>Afficher tous les stash</strong></p>
<pre tabindex="0"><code>git stash list
</code></pre><br/>
<p><strong>Appliquer un stash</strong></p>
<pre tabindex="0"><code># Exemple:
git stash apply stash@{0}
</code></pre><br/>
<p><strong>Annuler un <code>git stash pop</code> ou <code>git stash apply</code> si conflit</strong></p>
<pre tabindex="0"><code>git reset --merge
</code></pre><br/>
<p><strong>Annuler le conflit sur un fichier apr√®s git stash (reprendre version serveur)</strong></p>
<pre tabindex="0"><code># Apr√®s un $ git stash pop
git add sur_le_fichier_avec_confict
git reset HEAD -- sur_le_fichier_avec_confict
git checkout sur_le_fichier_avec_confict

# Note perso: 
# Tester si git rm --cached sur_le_fichier_avec_confict peut faire le job
</code></pre><br/>
<p><strong>Cr√©er un nouveau stash (stasher tous les fichiers)</strong></p>
<pre tabindex="0"><code>git stash save &#34;&lt;nom du stash&gt;&#34;
</code></pre><br/>
<p><strong>Cr√©er seulement certains fichiers</strong></p>
<p>Add to index changes we don&rsquo;t want to stash and then stash with &ndash;keep-index option.</p>
<pre tabindex="0"><code>git add app/controllers/cart_controller.php
git stash --keep-index
git reset
</code></pre><br/>
<p><strong>Appliquer un stash</strong></p>
<pre tabindex="0"><code>git stash branch myfeature
</code></pre><br/>
<p><strong>Appliquer le dernier stash (LIFO)</strong></p>
<pre tabindex="0"><code>git stash pop
</code></pre><br/>
<p><strong>Voir le contenu du dernier stash</strong></p>
<pre tabindex="0"><code>git stash show -p
</code></pre><br/>
<p><strong>Voir le contenu d&rsquo;un stash sp√©cifique</strong></p>
<pre tabindex="0"><code>git stash show -p stash@{42}
</code></pre><br/>
<h2 id="cherry-picking">Cherry-picking</h2>
<p>Cherry-pick permet de s√©lectionner un commit quelconque et de l‚Äôappliquer sur la branche actuelle.</p>
<pre tabindex="0"><code>git checkout my-feature
git cherry-pick e32c529d
</code></pre><br/>
<h2 id="r√©soudre-un-conflit">R√©soudre un conflit</h2>
<p><strong>Pendant un merge</strong></p>
<p>Apr√®s un <code>git merge</code> ou <code>git pull</code>, on commence par ex√©cuter la commande:</p>
<pre tabindex="0"><code>git status # ou gss # ou git st # git stp (voir mes alias)
# On branch master
# Changes to be committed:
#
#       modified:   mon_fichier1
#
# Unmerged paths:
#   (use &#34;git add/rm &lt; file &gt;...&#34; as appropriate to mark resolution)
#
#       both modified:      mon_fichier2
#
</code></pre><p>Puis on corrige le probl√®me de merge gr√¢ce √† la commande <code>git mergetool</code> qui ouvrira l&rsquo;outil de merge configur√© sur votre poste.
Autre possibilit√©, faire la correction manuellement, faire un <code>git add</code> ou <code>git stage</code> sur le fichier corrig√© et enfin un <code>git commit</code>.</p>
<blockquote>
<p>En cas de probl√®me, il est possible d&rsquo;ex√©cuter un <code>git reset --hard HEAD</code> pour revenir en arri√®re sur le merge</p>
</blockquote>
<blockquote>
<p>Pour configurer git mergetool, il est possible d&rsquo;utiliser la commande suivante: <code>git config --global merge.tool bc3</code> apr√®s avoir t√©l√©charg√© et install√© l&rsquo;extension <a href="https://marketplace.visualstudio.com/items?itemName=hung-vi.terminal-git-mergetool">vscode-ext-git-mergetool</a> pour OSX .</p>
</blockquote>
<br/>
<p><strong>Pendant un rebase</strong></p>
<pre tabindex="0"><code>git checkout master # ou git co master
git rebase origin/master # ou git pull --rebase

git status
# Unmerged paths:
#   (use &#34;git add/rm &lt; file &gt;...&#34; as appropriate to mark resolution)
#
#       both modified:      mon_fichier
#

git mergetool

# On corrige

git rebase --continue
</code></pre><blockquote>
<p>Pour revenir en arri√®re (√©tat du d√©pot) sur un rebase qui se passe mal: <code>git rebase --abort</code></p>
</blockquote>
<p>Un sch√©ma vaut mieux qu&rsquo;un long discours. Voici ce que fait un rebase:</p>
<p><img src="https://leandeep.com/images/rebase.png" alt="image"></p>
<br/>
<p><strong>G√©rer un conflit sur un binaire</strong></p>
<pre tabindex="0"><code>git checkout --ours -- path_binary_file
git checkout --theirs -- path_binary_file
</code></pre><br/>
<h2 id="r√©√©crire-lhistorique">R√©√©crire l&rsquo;historique</h2>
<pre tabindex="0"><code>git rebase --interactive HEAD~3
# ou 
# git rebase -i HEAD~3
# ou
# git rebase -i &lt;sha-de-votre-commit&gt; (via git log)
</code></pre><p>Plusieurs options s&rsquo;offrent √† nous pour les 3 commits:</p>
<ul>
<li>Supprimer la ligne pour supprimer le commit de l‚Äôhistorique</li>
<li>Changer l‚Äôordre des lignes pour changer l‚Äôordre d‚Äôapplication des commits</li>
<li>Remplacer &ldquo;pick&rdquo; par &ldquo;edit&rdquo; pour pouvoir modifier le commit</li>
<li>Remplacer &ldquo;pick&rdquo; par &ldquo;squash&rdquo; pour merger le commit avec le pr√©c√©dent pour n‚Äôen cr√©er qu‚Äôun seul</li>
<li>Remplacer &ldquo;pick&rdquo; par &ldquo;reword&rdquo; pour juste changer le message de commit</li>
</ul>
<p>Pour poursuivre la r√©√©criture de l‚Äôhistorique, terminer avec les commandes suivantes:</p>
<pre tabindex="0"><code>git stage
git rebase --continue
</code></pre><br/>
<h2 id="config-en-plus-de-oh-my-zsh">Config (en plus de oh-my-zsh)</h2>
<p>A ajouter au fichier ~/.gitconfig:</p>
<pre tabindex="0"><code>[alias]
        st = status
        stp = status --porcelain
        ci = commit
        br = branch
        co = checkout
        rz = reset --hard HEAD
        pullr = pull --rebase
        unstage = reset HEAD
        lol = log --graph --decorate --pretty=oneline --abbrev-commit
        lolar = log --graph --pretty=&#39;format:%C(auto)%h %d %s %C(green)%an%C(bold blue) %ad&#39; --all --date=relative
        lola = log --graph --decorate --pretty=oneline --abbrev-commit --all
        lpush = &#34;!git --no-pager log origin/$(git currentbranch)..HEAD --oneline&#34;
        lpull = &#34;!git --no-pager log HEAD..origin/$(git currentbranch) --oneline&#34;
        whatsnew = &#34;!git diff origin/$(git currentbranch)...HEAD&#34;
        whatscoming = &#34;!git diff HEAD...origin/$(git currentbranch)&#34;
        currentbranch = &#34;!git branch | grep \&#34;^\\*\&#34; | cut -d \&#34; \&#34; -f 2&#34;
...
[color]
        branch = auto
        diff = auto
        status = auto
        interactive = auto
</code></pre><br/>
<h2 id="t√©l√©charger-en-local-les-pull-requests">T√©l√©charger en local les Pull Requests</h2>
<p><strong>Projet par projet</strong></p>
<p>Dans le fichier .git/config, localiser le code qui ressemble √† ceci:</p>
<pre tabindex="0"><code>[remote &#34;origin&#34;]
	fetch = +refs/heads/*:refs/remotes/origin/*
	url = git@github.com:joyent/node.git
</code></pre><p>Maintenant ajouter la ligne suivante:</p>
<pre tabindex="0"><code>(pour Gitlab) fetch = +refs/merge-requests/*/head:refs/remotes/origin/merge-requests/*

# fetch = +refs/pull/*/head:refs/remotes/origin/pr/*
</code></pre><p>La section dans le fichier devrait resssemble √† cela:</p>
<pre tabindex="0"><code>[remote &#34;origin&#34;]
	fetch = +refs/heads/*:refs/remotes/origin/*
	url = git@github.com:joyent/node.git
	fetch = +refs/merge-requests/*/head:refs/remotes/origin/merge-requests/*
</code></pre><p>Maitenant vous pouvez r√©cup√©rer toutes les PR en cours:</p>
<pre tabindex="0"><code>git fetch origin
From github.com:joyent/node
 * [new ref]         refs/pull/1000/head -&gt; origin/pr/1000
 * [new ref]         refs/pull/1002/head -&gt; origin/pr/1002
 * [new ref]         refs/pull/1004/head -&gt; origin/pr/1004
 * [new ref]         refs/pull/1009/head -&gt; origin/pr/1009
...
</code></pre><p>Vous pouvez faire un checkout sur une pull request en particulier:</p>
<pre tabindex="0"><code>git checkout pr/999
Branch pr/999 set up to track remote branch pr/999 from origin.
Switched to a new branch &#39;pr/999&#39;
</code></pre><br/>
<p><strong>Ajouter automatiquement cette commande √† tous les repos</strong></p>
<pre tabindex="0"><code>git config --global --add remote.origin.fetch &#34;+refs/pull/*/head:refs/remotes/origin/pr/*&#34;
</code></pre><br/>
<h2 id="effacer-git-config-globale">Effacer git config globale</h2>
<pre tabindex="0"><code>git config --global --unset user.name
git config --global --unset user.email
</code></pre><br/>
<h2 id="v√©rifier-la-config-globale">V√©rifier la config globale</h2>
<pre tabindex="0"><code>git config --global -l
</code></pre><br/>
<h2 id="git-config-local">git config local</h2>
<pre tabindex="0"><code>git config user.name = &#34;username&#34;
git config user.email = &#34;email&#34;
git config core.sshCommand &#34;ssh -i ~/.ssh/id_rsa_example -F /dev/null&#34;
</code></pre><br/>
<h2 id="pr√©ciser-git-ssh-key-globale">Pr√©ciser git ssh key globale</h2>
<p>Editer le fichier ~/.ssh/config et ajouter le contenu suivant:</p>
<pre tabindex="0"><code>Host github.com
    HostName github.com
    IdentityFile ~/.ssh/id_rsa_example
</code></pre><br/>
<h2 id="diff√©rences-entre-branches">Diff√©rences entre branches</h2>
<p><strong>Diff√©rences entre branche actuelle et master:</strong></p>
<pre tabindex="0"><code>git diff master
</code></pre><br/>
<p><strong>Diff√©rences entre 2 branches (par exemple master et staging):</strong></p>
<pre tabindex="0"><code>git diff master..staging
</code></pre><br/>
<p><strong>Seulement montrer les fichiers diff√©rents entre 2 branches (sans les changements):</strong></p>
<pre tabindex="0"><code>git diff --name-status master..staging
</code></pre><br/>
<p><strong>Diff√©rence entre un fichier local (d√©j√† en stage) et le dernier commit (ou l&rsquo;avant dernier):</strong></p>
<pre tabindex="0"><code>git diff &lt;commit&gt; &lt;path&gt;
# Dernier commit:
git diff HEAD^ myfile
# Avant dernier commit:
git diff HEAD^^ myfile
# Equivalent √†:
git diff HEAD~2 myfile

Example:
git diff HEAD~1 HEAD -- mon_fichier.js
git diff HEAD~2 HEAD -- mon_fichier.js
</code></pre><br/>
<h2 id="commandes-en-vrac">Commandes en vrac</h2>
<p><strong>Annuler la commande <code>git commit</code> (et donc conserver/ r√©cup√©rer tous les changements qui √©taient pr√™ts √† √™tre push√©s:</strong></p>
<pre tabindex="0"><code>git reset --soft HEAD^
</code></pre><br/>
<p><strong>Modifier le dernier commit:</strong></p>
<pre tabindex="0"><code>git commit --amend
</code></pre><br/>
<p><strong>Annuler le dernier git amend:</strong></p>
<pre tabindex="0"><code>git reset --soft HEAD@{1}
</code></pre><br/>
<p><strong>Annuler le dernier git cherry-pick (successful):</strong></p>
<pre tabindex="0"><code>git reset --hard HEAD~1
</code></pre><br/>
<p><strong>Renommer une branche locale:</strong></p>
<pre tabindex="0"><code>git checkout ancien_nom
git branch -m nouveau_nom
git push origin nouveau_nom
</code></pre><br/>
<p><strong>Effacer une branche locale:</strong></p>
<pre tabindex="0"><code>git branch -d new-branch
</code></pre><br/>
<p><strong>Effacer une branche remote:</strong></p>
<pre tabindex="0"><code>git push origin --delete new-branch
</code></pre><br/>
<p><strong>Retourner sur la derni√®re branche:</strong></p>
<pre tabindex="0"><code>git checkout -
</code></pre><br/>
<p><strong>Contr√¥ler le comportement de git push par default pour √©viter de devoir specifier la branch (sur laquelle on est) avant de pusher:</strong></p>
<pre tabindex="0"><code>git config --global push.default current
</code></pre><br/>
<p><strong>Annuler les changements en local d&rsquo;un fichier</strong></p>
<pre tabindex="0"><code>git checkout filename
</code></pre><br/>
<p><strong>Pusher un seul commit</strong></p>
<pre tabindex="0"><code>git push &lt;remote_name&gt; &lt;commit SHA&gt;:&lt;remote_branch_name&gt;
</code></pre><p>La branche &lt;remote_branch_name&gt; doit exister sur remote. (Si ce n&rsquo;est pas le cas, il est possible d&rsquo;utiliser <code>git push &lt;remote_name&gt; &lt;commit SHA&gt;:refs/heads/&lt;remote_branch_name&gt;</code> pour la cr√©er automatiquement.)</p>
<blockquote>
<p>Note:
<code>git push --set-upstream origin dev</code> ou <code>git push -u origin dev</code>
Cette commande envoie la branche ¬´ dev ¬ª vers le d√©p√¥t ¬´ origin ¬ª (i.e. celui dont on a fait un clone au d√©part), et l&rsquo;option &ndash;set-upstream permet de dire √† Git de se souvenir qu&rsquo;un ¬´ git push ¬ª de notre branche ¬´ dev ¬ª a √©t√© fait. Le prochain push pourra donc se faire simplement avec un simple <code>git push</code>.</p>
</blockquote>
<br/>
<p><strong>Annuler le dernier commit</strong></p>
<p>Les commandes √† appliquer d√©pendent du dernier commit:</p>
<ul>
<li>
<p>Quand le dernier commit <strong>n&rsquo;est pas</strong> le commit initial, il suffit d&rsquo;ex√©cuter la commance suivante: <code>git reset HEAD~</code></p>
</li>
<li>
<p>Quand le dernier commit <strong>est</strong> le commit initial, il faut ex√©cuter les commandes suivantes: <code>git update-ref -d HEAD</code> puis <code>git rm --cached -r .</code></p>
</li>
</ul>
<br/>
<p><strong>Annuler le dernier commit et garder tous les changements staged</strong></p>
<pre tabindex="0"><code>git reset --soft HEAD~
</code></pre><p><em>C&rsquo;est diff√©rent de <code>git reset HEAD~</code> qui ne garde pas staged les derniers changements.</em></p>
<br/>
<p><strong>Annuler le dernier git pull</strong></p>
<pre tabindex="0"><code>git reset HEAD~1 --hard
</code></pre><blockquote>
<p><code>--hard</code> pr√©cise √† git que l&rsquo;on souhaite avoir notre r√©pertoire de travail avec le contenu du commit choisi</p>
</blockquote>
<br/>
<p><strong>Pull remote branch sans merge</strong></p>
<p>On suppose que l&rsquo;on est d√©j√† sur la branch que l&rsquo;on souhaite resynchroniser</p>
<pre tabindex="0"><code>git pull --rebase

<br/>

**Retirer un commit particulier sur une branch**
</code></pre><p>git reset &ndash;hard commit-hash</p>
<pre tabindex="0"><code>
<br/>

**Voir les derniers commits locaux pas encore push√© sur l&#39;origin:**
</code></pre><p>git log &ndash;branches &ndash;not &ndash;remotes</p>
<pre tabindex="0"><code><br/>

**Effacer les fichiers du working directory en incluant les nouveaux untracked files**
</code></pre><p>git clean -fd</p>
<pre tabindex="0"><code>
<br/>

**Lister les tags sur un commit**
</code></pre><p>git tag &ndash;points-at HEAD</p>
<pre tabindex="0"><code>
<br/>

**Tagguer (le dernier commit d&#39;) une branche**
</code></pre><p>git tag mon_tag
git push origin mon_tag</p>
<h1 id="non-recommand√©-pousser-tous-les-tags">(non recommand√©) pousser tous les tags</h1>
<p>git push &ndash;tags</p>
<pre tabindex="0"><code>
<br/>

**Lister les fichiers modifi√©s dans une branche par rapport √† master:**
</code></pre><p>git diff &ndash;name-only ma_branche $(git merge-base ma_branche master)</p>
<pre tabindex="0"><code>
<br/>

**Ajouter un tag sur un commit particulier**
</code></pre><p>git tag -a v1.0 d613c59
git push origin v1.0</p>
<pre tabindex="0"><code>
<br/>

**Effacer un tag local et remote**
</code></pre><h1 id="effacement-local">Effacement local</h1>
<p>git tag -d v1.0</p>
<h1 id="effacement-remote">Effacement remote</h1>
<p>git push &ndash;delete origin v1.0
ou
git push origin :refs/tags/v1.0</p>
<pre tabindex="0"><code>
<br/>

**Lister les commits entre un tag et HEAD**
</code></pre><p>git log &ndash;pretty=oneline HEAD&hellip;v1.0</p>
<pre tabindex="0"><code>
&gt; Alternative sans les commits de merge: `git log --pretty=oneline HEAD...v1.0 --no-merges`

&gt; Alternative avec tous les d√©tails: `git log HEAD...v1.0`

&gt; Autre alternative: `git log --pretty=format:&#34;%h; author: %cn; date: %ci; subject:%s&#34; HEAD...v1.0`

<br/>

**Lister les commits de merge depuis le dernier tag et afficher uniquement le commit message**
</code></pre><p>git log $(git describe &ndash;abbrev=0 &ndash;tags)..HEAD &ndash;merges &ndash;pretty=format:&quot;%b&quot;</p>
<pre tabindex="0"><code>
<br/>


**Lister les commits de merge entre les 2 derniers tags et afficher uniquement le commit message**
</code></pre><p>git log $(git describe &ndash;abbrev=0 &ndash;tags <code>git rev-list --tags --skip=1 --max-count=1</code>)..$(git describe &ndash;abbrev=0 &ndash;tags <code>git rev-list --tags --skip=0 --max-count=1</code>) &ndash;merges &ndash;pretty=format:&quot;%b&quot;</p>
<pre tabindex="0"><code>
<br/>

**R√©cup√©rer le dernier tag**
</code></pre><p>git describe &ndash;abbrev=0 &ndash;tags <code>git rev-list --tags --skip=0 --max-count=1</code></p>
<pre tabindex="0"><code><br/>

**R√©cup√©rer l&#39;avant dernier tag**
</code></pre><p>git describe &ndash;abbrev=0 &ndash;tags <code>git rev-list --tags --skip=0 --max-count=1</code></p>
<pre tabindex="0"><code>
<br/>

**Voir les commits par contributeur depuis la derni√®re release/tag**
</code></pre><p>git shortlog &ndash;merges $(git describe &ndash;abbrev=0 &ndash;tags)..HEAD</p>
<pre tabindex="0"><code>
<br/>

**Get current branch**
</code></pre><p>git rev-parse &ndash;abbrev-ref HEAD</p>
<pre tabindex="0"><code>
<br/>

**Voir les changements/ commits sur un fichier**
</code></pre><p>git log &ndash;follow -p &ndash; full_path_mon_fichier</p>
<h1 id="--follow-permet-de-suivre-un-fichier-sil-a-√©t√©-renomm√©">&ndash;follow permet de suivre un fichier s&rsquo;il a √©t√© renomm√©</h1>
<pre tabindex="0"><code> 
&gt; Alternative:
&gt; `find . -name &#34;*mon_fichier&#34; | xargs git log`

&gt; **Super Alternative:**  <br/>
&gt; `tig full_path_mon_fichier` ou `tig &#39;*mon_fichier&#39;` <br/>
&gt; Installation de tig via `brew install tig` ou `apt install tig` <br/>
&gt; [Tig Full documentation](http://jonas.nitro.dk/tig/manual.html)

<br/>

## Naviguer dans tout son historique Git 
</code></pre><p>$ git init
Initialized empty Git repository in .git/</p>
<p>$ echo &ldquo;testing reset&rdquo; &gt; file1
$ git add file1
$ git commit -m &lsquo;added file1&rsquo;
Created initial commit 1a75c1d: added file1
1 files changed, 1 insertions(+), 0 deletions(-)
create mode 100644 file1</p>
<p>$ echo &ldquo;added new file&rdquo; &gt; file2
$ git add file2
$ git commit -m &lsquo;added file2&rsquo;
Created commit f6e5064: added file2
1 files changed, 1 insertions(+), 0 deletions(-)
create mode 100644 file2</p>
<p>$ git reset &ndash;hard HEAD^
HEAD is now at 1a75c1d&hellip; added file1</p>
<p>$ cat file2
cat: file2: No such file or directory</p>
<p>$ git reflog
1a75c1d&hellip; HEAD@{0}: reset &ndash;hard HEAD^: updating HEAD
f6e5064&hellip; HEAD@{1}: commit: added file2</p>
<p>$ git reset &ndash;hard f6e5064
HEAD is now at f6e5064&hellip; added file2</p>
<p>$ cat file2
added new file</p>
<pre tabindex="0"><code>
<br/>

## Taille en local du repo
</code></pre><p>$ git count-objects -v -H</p>
<p>count: 6
size: 24.00 KiB
in-pack: 0
packs: 0
size-pack: 0 bytes
prune-packable: 0
garbage: 0
size-garbage: 0 bytes</p>
<pre tabindex="0"><code>
<br/>

## Bisect 

&gt; Le bisect permet de r√©aliser une dichotimie sur un range de commit afin d&#39;identifier celui qui g√©n√®re une r√©gression.
</code></pre><p>$ git bisect start          # Start the binary search process
$ git bisect bad            # Identify the end of the range
$ git bisect good v4.2.0    # Identify the start of the range</p>
<pre tabindex="0"><code>
Puis apr√®s un test sur votre app ou tests unitaires pr√©ciser soit `git bisect bad` ou `git bisect good`

<br/>


## Ajouter un submodule dans son repo
</code></pre><p>git submodule add <a href="https://github.com/">https://github.com/</a><!-- raw HTML omitted -->/mon_repo_as_submodule mon_repo_as_submodule</p>
<pre tabindex="0"><code>
<br/>


## Cloner un repo git contenant un submodule
</code></pre><p>git clone &ndash;recursive <a href="https://github.com/">https://github.com/</a><!-- raw HTML omitted -->/mon_repo</p>
<pre tabindex="0"><code>
<br/>


## Effacer un submodule du repo
</code></pre><p>git submodule deinit -f‚Äâ‚Äî‚Äâmon_repo_as_submodule
rm -rf .git/modules/mon_repo_as_submodule
git rm -f mon_repo_as_submodule</p>
<pre tabindex="0"><code>
<br/>

## Pull git submodules apr√®s avoir clon√© un projet sur GitHub

&gt; Normalement la commande suivante est automatiquement jou√©e par git sur les nouvelles versions
</code></pre><p>git submodule update &ndash;init &ndash;recursive</p>
<pre tabindex="0"><code>
<br/>

## Importer les mises √† jour d&#39;un submodule dans le repo
</code></pre><p>git submodule update &ndash;recursive</p>
<pre tabindex="0"><code>
<br/>

## Mettre √† jour un submodule √† la derni√®re version
</code></pre><p>cd mon_repo_as_submodule
git checkout master &amp;&amp; git pull
cd ..
git add mon_repo_as_submodule
git commit -m &ldquo;updating submodule to latest&rdquo;</p>
<pre tabindex="0"><code>
<br/>

## .gitignore global
</code></pre><p>touch ~/.gitignore_global
git config &ndash;global core.excludesfile ~/.gitignore_global</p>
<pre tabindex="0"><code>
## Diff√©rence entre git pull et git pull --rebase


Point de d√©part:
</code></pre><pre><code>  D---E master
 /
</code></pre>
<p>A&mdash;B&mdash;C&mdash;F origin/master</p>
<pre tabindex="0"><code>
Un `git pull` donnera:
</code></pre><pre><code>  D--------E  
 /         \
</code></pre>
<p>A&mdash;B&mdash;C&mdash;F&mdash;-G   master, origin/master</p>
<pre tabindex="0"><code>
Un `git pull --rebase` donnera
</code></pre><p>A&mdash;B&mdash;C&mdash;F&mdash;D&rsquo;&mdash;E&rsquo;   master, origin/master</p>
<pre tabindex="0"><code>
<br/>

## Ajouter un tag en 2s (shortcuts)

Ajouter ceci au fichier `~/.zshrc`
</code></pre><p>last_release ()
{
git describe &ndash;abbrev=0 &ndash;tags <code>git rev-list --tags --skip=0 --max-count=1</code>
}</p>
<p>previous_release ()
{
last_release
}</p>
<p>last_tag ()
{
last_release
}</p>
<p>previous_tag ()
{
last_release
}</p>
<p>last_branches ()
{
git branch &ndash;sort=-committerdate
}</p>
<p>function new_release {
readonly releaseversion=${1:?&ldquo;The release version (i.e. new_release vX.X.X) must be specified.&rdquo;}
current_branch=$(git rev-parse &ndash;abbrev-ref HEAD)
if [ &ldquo;$current_branch&rdquo; != &ldquo;master&rdquo; ]; then
echo &ldquo;Your are not on master branch. Please switch to it to create a new tag&rdquo;
else
git tag $releaseversion
git push origin $releaseversion
fi
}</p>
<pre tabindex="0"><code>
<br/>

## Convertir la remote URL de HTTPS en SSH et vice-versa
</code></pre><p>alias git-https=&ldquo;git remote set-url origin <a href="https://github.com/$(git">https://github.com/$(git</a> remote get-url origin | sed &rsquo;s/https://github.com///&rsquo; | sed &rsquo;<a href="mailto:s/git@github.com">s/git@github.com</a>://&rsquo;)&rdquo;</p>
<p>alias git-ssh=&ldquo;git remote set-url origin <a href="mailto:git@github.com">git@github.com</a>:$(git remote get-url origin | sed &rsquo;s/https://github.com///&rsquo; | sed &rsquo;<a href="mailto:s/git@github.com">s/git@github.com</a>://&rsquo;)&rdquo;</p>
<pre tabindex="0"><code>
<br/>

## Ajouter une cl√© priv√© dans une session SSH distante
</code></pre><p>eval <code>ssh-agent -s</code></p>
<pre tabindex="0"><code>
<br/>

## Workflow pour travailler en √©quipe

**Gitflow:**
http://danielkummer.github.io/git-flow-cheatsheet/


<br/>

*Edited 13 november 2016:*

**Better method: Github flow:**

https://blogs.technet.microsoft.com/devops/2016/06/21/a-git-workflow-for-continuous-delivery/
</code></pre>
            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://leandeep.com/tags/development">Development</a></span><span class="tag"><a href="https://leandeep.com/tags/git">Git</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>2621 Mots</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>19 sept.. 2015</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h"></span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://leandeep.com/comment-lire-une-matrice-de-confusion/">
                                <span class="button__icon">‚Üê</span>
                                <span class="button__text">Comment lire une Matrice de confusion</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://leandeep.com/basics-python-commands-pour-matplotlib-numpy-pandas-et-debugging-misc/">
                                <span class="button__text">Basics Python commands pour Matplotlib, Numpy, Pandas et debugging misc</span>
                                <span class="button__icon">‚Üí</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>Built by <a href="https://www.linkedin.com/in/oliviereeckhoutte/">Olivier Eeckhoutte</a>,
                Freelance @ LeanDeep <a href="https://leandeep.com/about/">(üçÉ company)</a></span>
            <span>Siret: 83825337500011</span>
            <span><a href="https://leandeep.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss">
                        <path d="M4 11a9 9 0 0 1 9 9"></path>
                        <path d="M4 4a16 16 0 0 1 16 16"></path>
                        <circle cx="5" cy="19" r="1"></circle>
                    </svg></a></span>
        </div>
    </div>
</footer>
            
        </div>

        




<script type="text/javascript" src="https://leandeep.com/bundle.min.c184f8481b5847ad1a7d8aa775944fa063f118cb4df68f4eaa3826a2a2e16b26a1ad798f5160210f265c6fbb9a5f19b953fed066ae1ed1092d1858bcff13ae92.js" integrity="sha512-wYT4SBtYR60afYqndZRPoGPxGMtN9o9OqjgmoqLhayahrXmPUWAhDyZcb7uaXxm5U/7QZq4e0QktGFi8/xOukg=="></script>







    </body>
</html>
