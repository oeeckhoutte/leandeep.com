<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pi on Lean Deep Tech blog</title>
    <link>https://leandeep.com/tags/pi/</link>
    <description>Recent content in Pi on Lean Deep Tech blog</description>
    <generator>Hugo</generator>
    <language>fr</language>
    <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/4.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CC BY-NC 4.0&lt;/a&gt;</copyright>
    <lastBuildDate>Mon, 28 Apr 2025 21:55:00 +0200</lastBuildDate>
    <atom:link href="https://leandeep.com/tags/pi/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Access Raspberry Pi Camera using Python and OpenCV</title>
      <link>https://leandeep.com/access-raspberry-pi-camera-using-python-and-opencv/</link>
      <pubDate>Mon, 28 Apr 2025 21:55:00 +0200</pubDate>
      <guid>https://leandeep.com/access-raspberry-pi-camera-using-python-and-opencv/</guid>
      <description>&lt;p&gt;In this article we are going to see how to install OpenCV on a Raspberry PI using Bookworm.&lt;/p&gt;&#xA;&lt;br/&gt;&#xA;&lt;h2 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Install dependencies on Raspberry Pi&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo apt update&#xA;sudo apt install python3-picamera2&#xA;sudo apt install libcamera-apps&#xA;sudo apt install python3-opencv&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;br/&gt;&#xA;&lt;p&gt;&lt;strong&gt;Install dependencies on Macbook&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;pip install opencv-python numpy&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;br/&gt;&#xA;&lt;h2 id=&#34;code&#34;&gt;Code&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import cv2&#xA;import numpy as np&#xA;import time&#xA;from datetime import datetime&#xA;import os&#xA;&#xA;# ==========================&#xA;#   CONSTANTS (Configuration)&#xA;# ==========================&#xA;BLUR_SIZE = (7, 7)              # Larger → less sensitive (e.g., (7,7) or (9,9))&#xA;THRESHOLD_SENSITIVITY = 50       # Higher → less sensitive (e.g., 60, 70)&#xA;MIN_CONTOUR_AREA = 2000          # Higher → only detects larger movements&#xA;FRAME_WAIT_TIME = 0.1            # Time to wait between frames (in seconds)&#xA;SAVE_DIR = &amp;#34;captures&amp;#34;            # Directory to save captured images&#xA;&#xA;# ==========================&#xA;#   Camera Initialization&#xA;# ==========================&#xA;def initialize_camera():&#xA;    try:&#xA;        from picamera2 import Picamera2&#xA;        picam2 = Picamera2()&#xA;        config = picam2.create_preview_configuration(main={&amp;#34;format&amp;#34;: &amp;#34;RGB888&amp;#34;, &amp;#34;size&amp;#34;: (640, 480)})&#xA;        picam2.configure(config)&#xA;        picam2.start()&#xA;        time.sleep(2)&#xA;        print(&amp;#34;[INFO] Raspberry Pi camera initialized.&amp;#34;)&#xA;        return picam2, True&#xA;    except ImportError:&#xA;        cap = cv2.VideoCapture(0)&#xA;        if not cap.isOpened():&#xA;            raise Exception(&amp;#34;[ERROR] Cannot open webcam.&amp;#34;)&#xA;        time.sleep(2)&#xA;        print(&amp;#34;[INFO] Webcam initialized.&amp;#34;)&#xA;        return cap, False&#xA;&#xA;# ==========================&#xA;#   Frame Capture&#xA;# ==========================&#xA;def capture_frame(camera, is_picam):&#xA;    if is_picam:&#xA;        return camera.capture_array()&#xA;    else:&#xA;        ret, frame = camera.read()&#xA;        if not ret:&#xA;            raise Exception(&amp;#34;[ERROR] Failed to capture frame.&amp;#34;)&#xA;        return frame&#xA;&#xA;# ==========================&#xA;#   Frame Processing&#xA;# ==========================&#xA;def process_frame(current_frame, previous_frame, is_picam):&#xA;    # Apply Gaussian blur&#xA;    current_blurred = cv2.GaussianBlur(current_frame, BLUR_SIZE, 0)&#xA;    previous_blurred = cv2.GaussianBlur(previous_frame, BLUR_SIZE, 0)&#xA;&#xA;    # Convert to grayscale&#xA;    if is_picam:&#xA;        gray_current = cv2.cvtColor(current_blurred, cv2.COLOR_RGB2GRAY)&#xA;        gray_previous = cv2.cvtColor(previous_blurred, cv2.COLOR_RGB2GRAY)&#xA;    else:&#xA;        gray_current = cv2.cvtColor(current_blurred, cv2.COLOR_BGR2GRAY)&#xA;        gray_previous = cv2.cvtColor(previous_blurred, cv2.COLOR_BGR2GRAY)&#xA;&#xA;    # Compute difference and threshold&#xA;    diff = cv2.absdiff(gray_previous, gray_current)&#xA;    _, thresh = cv2.threshold(diff, THRESHOLD_SENSITIVITY, 255, cv2.THRESH_BINARY)&#xA;    thresh = cv2.dilate(thresh, None, iterations=2)&#xA;&#xA;    return thresh&#xA;&#xA;# ==========================&#xA;#   Movement Detection&#xA;# ==========================&#xA;def detect_movement(thresh):&#xA;    contours, _ = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)&#xA;&#xA;    for contour in contours:&#xA;        if cv2.contourArea(contour) &amp;gt;= MIN_CONTOUR_AREA:&#xA;            return True&#xA;    return False&#xA;&#xA;# ==========================&#xA;#   Save Frame&#xA;# ==========================&#xA;def save_frame(frame, is_picam):&#xA;    now = datetime.now()&#xA;    timestamp = now.strftime(&amp;#34;%Y-%m-%d_%H-%M-%S&amp;#34;)&#xA;    filename = os.path.join(SAVE_DIR, f&amp;#34;capture_{timestamp}.jpg&amp;#34;)&#xA;&#xA;    if is_picam:&#xA;        frame_to_save = cv2.cvtColor(frame, cv2.COLOR_RGB2BGR)&#xA;    else:&#xA;        frame_to_save = frame  # Already BGR&#xA;&#xA;    cv2.imwrite(filename, frame_to_save)&#xA;    print(f&amp;#34;[INFO] Image saved: {filename}&amp;#34;)&#xA;&#xA;# ==========================&#xA;#   Main Function&#xA;# ==========================&#xA;def main():&#xA;    os.makedirs(SAVE_DIR, exist_ok=True)&#xA;&#xA;    camera, is_picam = initialize_camera()&#xA;    previous_frame = capture_frame(camera, is_picam)&#xA;&#xA;    print(&amp;#34;[INFO] Surveillance started... (Press Ctrl+C to exit)&amp;#34;)&#xA;&#xA;    try:&#xA;        while True:&#xA;            current_frame = capture_frame(camera, is_picam)&#xA;            thresh = process_frame(current_frame, previous_frame, is_picam)&#xA;&#xA;            if detect_movement(thresh):&#xA;                print(f&amp;#34;[{datetime.now().strftime(&amp;#39;%Y-%m-%d %H:%M:%S&amp;#39;)}] Movement detected!&amp;#34;)&#xA;                save_frame(current_frame, is_picam)&#xA;&#xA;            previous_frame = current_frame.copy()&#xA;            time.sleep(FRAME_WAIT_TIME)&#xA;&#xA;    except KeyboardInterrupt:&#xA;        print(&amp;#34;\n[INFO] Surveillance stopped by the user.&amp;#34;)&#xA;&#xA;    finally:&#xA;        if is_picam:&#xA;            camera.stop()&#xA;        else:&#xA;            camera.release()&#xA;&#xA;# ==========================&#xA;#   Entry Point&#xA;# ==========================&#xA;if __name__ == &amp;#34;__main__&amp;#34;:&#xA;    main()&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;br/&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;BLUR_SIZE&lt;/code&gt;: larger → less sensitive (e.g., (7,7) or (9,9))&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;THRESHOLD_SENSITIVITY&lt;/code&gt;: higher → less sensitive (e.g., 60, 70)&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;MIN_CONTOUR_AREA&lt;/code&gt;: higher → only detects larger movements&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
    <item>
      <title>H-Bridge L298N with Raspberry Pi and Python</title>
      <link>https://leandeep.com/h-bridge-l298n-with-raspberry-pi-and-python/</link>
      <pubDate>Mon, 28 Apr 2025 21:49:00 +0200</pubDate>
      <guid>https://leandeep.com/h-bridge-l298n-with-raspberry-pi-and-python/</guid>
      <description>&lt;p&gt;In the article we are going to see how to control a H-bridge L298N connected to a Raspberry Pi using Python.&lt;/p&gt;&#xA;&lt;br/&gt;&#xA;&lt;h2 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;Connect the bridge L298N to the raspberry pi&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://leandeep.com/images/rsapberry-3b-gpio.svg&#34; alt=&#34;image&#34;&gt;&lt;/p&gt;&#xA;&lt;br/&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Connect the pin IN1 of the L298N to GPIO7 (pin 26) of the Raspberry Pi (so GPIO4).&lt;/li&gt;&#xA;&lt;li&gt;Connect the pin IN2 of the L298N to GPIO8 (pin 24) of the Raspberry Pi.&lt;/li&gt;&#xA;&lt;li&gt;Connect the pin ENA of the L298N to GPIO25 (pin 22) of the Raspberry Pi.&lt;/li&gt;&#xA;&lt;li&gt;Connect the pin VCC of the L298N to the pin 2 of the Raspberry Pi.&lt;/li&gt;&#xA;&lt;li&gt;Connect the pin GND of the L298N to the pin 6 of the Raspberry Pi.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;br/&gt;&#xA;&lt;p&gt;&lt;strong&gt;Install dependency&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
